{% extends 'landing_base.html' %}
{% load static %}
{% load humanize %}
{% block content %}


<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <title>Jobs</title>

</head>
<br>
<br>
<br>
<br>
<br>

<section class="ftco-section bg-light">
    <form method="GET" action="{% url 'jobs:results' %}">
        <div class="form-row">
            <div class="col"></div>
            <div class="form-group col col-md-6">
                <div class="input-group">
                    <input class="form-control" type="search" name="q" id="id_q"
                        value="{{request.GET.q}}" placeholder="Civil Service Title, Business Title, or Agency" />
                </div>
            </div>
            <button type="submit" class="form-group btn btn-primary" method="get" action="{% url 'jobs:results' %}"
                value="Search">Search</button>
            <div class="col"></div>
        </div>
    </form>
    <!--Job Card Starts here .//-->
    <div class="container">
        <div class="col-md-12">
            <div class="row justify-content-center pb-3">
                <div class="col-md-12 heading-section ftco-animate">
                    <h2 class="mb-4">Found {{object_list.count}} matching jobs: </h2>
                </div>
            </div>
        </div>
        <div class="row">
            {% if object_list %}
            {% for result in object_list %}
            <div class="col-md-12 ftco-animate">
                <div class="job-post-item p-4 d-block d-lg-flex align-items-center">
                    <div class="one-third mb-4 mb-md-0">
                        <div class="job-post-item-header align-items-center">
                            {% if result.posting_type == "Internal" %}
                            <span class="text-white badge py-2 px-3" style="background-color:palevioletred">{{result.posting_type}}</span>
                            {% else %}
                            <span class="text-white badge py-2 px-3" style="background-color:steelblue">{{result.posting_type}}</span>
                            {% endif %}
                            <span class="text-white badge py-2 px-3"
                                style="margin-left: 5px; background-color:olive">{{result.career_level }}</span>
                            {% if result.post_until is None %}
                            <span class="text-white badge py-2 px-3" style="margin-left: 5px; background-color:salmon">Deadline: Until
                                Position is Filled</span>
                            {% else %}
                            <span class="text-white badge py-2 px-3" style="margin-left: 5px; background-color:salmon">Deadline:
                                {{result.post_until }}</span>
                            {% endif %}

                            <h2><a class="mr-2 text-black" data-toggle="collapse"
                                href="#demo{{result.id}}">{{result.business_title}}</a> </h2>
                            <div id="demo{{result.id}}" class="collapse" style="overflow-y: auto; scroll:auto; max-height: 30vh">
                            <p><b>Job Id: </b>{{result.job_id}}</p>
                            {% if result.posting_updated %}
                            <p><b>Last Updated: </b>{{result.posting_updated}}</p>
                            {% else %}
                            <p><b>Posted Date: </b>{{result.posting_date}}</p>
                            {% endif %}
                            <p><b>Title Classification: </b>{{result.title_classification}}</p>
                            {% if result.full_time_part_time_indicator == 'F' %}
                            <p><b>Full-time/Part-Time: </b>Full-Time</p>
                            {% else %}
                            <p><b>Full-time/Part-Time: </b>Part-Time</p>
                            {% endif %}
                            <p><b>Residency Requirement: </b>{{result.residency_requirement}}</p>
                            <p><b>Salary Range: </b>${{result.salary_range_from|floatformat:2|intcomma }} -
                                ${{result.salary_range_to|floatformat:2|intcomma }}
                                ({{result.salary_frequency}})</p>
                            <p><b>Description: </b>{{result.job_description|linebreaksbr}}</p>
                            {% if result.minimum_qual_requirements%}
                            <p><b>Minimum Qualification: </b>{{result.minimum_qual_requirements|linebreaksbr}}</p>
                            {% endif %}
                            {% if result.preferred_skills%}
                            <p><b>Preferred Skill: </b>{{result.preferred_skills|linebreaksbr}}</p>
                            {% endif %}
                            {% if result.additional_information%}
                            <p><b>Additional Information: </b>{{result.additional_information|linebreaksbr}}</p>
                            {% endif %}
                            </div>
                        </div>
                        <div class="job-post-item-body d-block d-md-flex">
                            <div class="mr-3"><span class="icon-layers"></span> <a>{{result.agency}}</a>
                            </div>
                            <div><span class="icon-person"></span> <span>{{result.civil_service_title}}</span></div>
                        </div>
                    </div>

                    <div class="one-forth ml-auto d-flex align-items-center mt-4 md-md-0">
                        <div>
                            <a href="#"
                                class="icon text-center d-flex justify-content-center align-items-center icon mr-2">
                                <span class="icon-heart"></span>
                            </a>
                        </div>
                        <a href="#" class="btn btn-primary py-2">Apply Job</a>
                    </div>
                </div>
            </div><!-- end -->
            {% endfor %}
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}